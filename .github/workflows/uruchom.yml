# .github/workflows/uruchom_skrypt.yml

# Nazwa Twojej automatyzacji, będzie widoczna w zakładce "Actions"
name: 🚀 Uruchom Wyszukiwarkę E-maili

# Definicja wyzwalaczy (kiedy skrypt ma się uruchomić)
on:
  # Umożliwia ręczne uruchomienie z poziomu zakładki "Actions" na GitHubie
  workflow_dispatch:

  # Uruchamia skrypt automatycznie według harmonogramu (format cron)
  schedule:
    # Ten przykład uruchamia skrypt w każdą niedzielę o 5:30 rano czasu UTC
    # Możesz dostosować harmonogram tutaj: https://crontab.guru/
    - cron: '30 5 * * 0'

# Definicja zadań do wykonania
jobs:
  # Nazwa zadania (może być dowolna)
  uruchom-wyszukiwarke:
    # Określenie systemu operacyjnego, na którym skrypt będzie działał
    runs-on: ubuntu-latest

    # Lista kroków do wykonania
    steps:
      # Krok 1: Pobranie kodu z Twojego repozytorium
      - name: 📥 Pobierz kod repozytorium
        uses: actions/checkout@v4

      # Krok 2: Ustawienie środowiska Python w konkretnej wersji
      - name: 🐍 Ustaw środowisko Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Możesz zmienić wersję Pythona

      # Krok 3: Instalacja potrzebnych bibliotek z pliku requirements.txt
      - name: 📦 Zainstaluj zależności
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # Krok 4: Uruchomienie Twojego głównego skryptu
      - name: ▶️ Uruchom skrypt wyszukiwarki
        run: python wyszukiwarka_emaili.py

      # Krok 5: Zapisanie pliku z wynikami jako "artefakt"
      # Dzięki temu będziesz mógł pobrać plik wyniki.csv po zakończeniu działania
      - name: 💾 Zapisz wyniki jako artefakt
        uses: actions/upload-artifact@v4
        with:
          # Nazwa artefaktu, która będzie widoczna na stronie pobierania
          name: wyniki-wyszukiwania-emaili
          # Ścieżka do pliku, który ma zostać zapisany
          path: wyniki.csv
