# .github/workflows/uruchom_skrypt.yml

# Nazwa Twojej automatyzacji, b캧dzie widoczna w zak켹adce "Actions"
name: 游 Uruchom Wyszukiwark캧 E-maili

# Definicja wyzwalaczy (kiedy skrypt ma si캧 uruchomi캖)
on:
  # Umo콮liwia r캧czne uruchomienie z poziomu zak켹adki "Actions" na GitHubie
  workflow_dispatch:

  # Uruchamia skrypt automatycznie wed켹ug harmonogramu (format cron)
  schedule:
    # Ten przyk켹ad uruchamia skrypt w ka콮d캔 niedziel캧 o 5:30 rano czasu UTC
    # Mo콮esz dostosowa캖 harmonogram tutaj: https://crontab.guru/
    - cron: '30 5 * * 0'

# Definicja zada켻 do wykonania
jobs:
  # Nazwa zadania (mo콮e by캖 dowolna)
  uruchom-wyszukiwarke:
    # Okre콑lenie systemu operacyjnego, na kt칩rym skrypt b캧dzie dzia켹a켹
    runs-on: ubuntu-latest

    # Lista krok칩w do wykonania
    steps:
      # Krok 1: Pobranie kodu z Twojego repozytorium
      - name: 游닌 Pobierz kod repozytorium
        uses: actions/checkout@v4

      # Krok 2: Ustawienie 콑rodowiska Python w konkretnej wersji
      - name: 游냀 Ustaw 콑rodowisko Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Mo콮esz zmieni캖 wersj캧 Pythona

      # Krok 3: Instalacja potrzebnych bibliotek z pliku requirements.txt
      - name: 游닍 Zainstaluj zale콮no콑ci
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # Krok 4: Uruchomienie Twojego g켹칩wnego skryptu
      - name: 郊윒잺 Uruchom skrypt wyszukiwarki
        run: python wyszukiwarka_emaili.py

      # Krok 5: Zapisanie pliku z wynikami jako "artefakt"
      # Dzi캧ki temu b캧dziesz m칩g켹 pobra캖 plik wyniki.csv po zako켻czeniu dzia켹ania
      - name: 游 Zapisz wyniki jako artefakt
        uses: actions/upload-artifact@v4
        with:
          # Nazwa artefaktu, kt칩ra b캧dzie widoczna na stronie pobierania
          name: wyniki-wyszukiwania-emaili
          # 콐cie콮ka do pliku, kt칩ry ma zosta캖 zapisany
          path: wyniki.csv
